{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\blood-bank-management\\\\src\\\\components\\\\pages\\\\AdminRequest.js\";\nimport React, { useState, useEffect } from 'react';\nimport { db, collection, query, where, getDocs, updateDoc, doc } from '../../firebase';\nimport './AdminRequest.css';\nimport Sidebar from '../Sidebar';\nconst Requests = () => {\n  const [requests, setRequests] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const fetchRequests = async () => {\n      try {\n        const q = query(collection(db, 'requests'), where('status', '==', 'pending'));\n        const querySnapshot = await getDocs(q);\n        const requestList = querySnapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        }));\n        setRequests(requestList);\n        setLoading(false);\n      } catch (error) {\n        console.error('Error fetching requests:', error);\n      }\n    };\n    fetchRequests();\n  }, []);\n  const handleApprove = async id => {\n    try {\n      const requestRef = doc(db, 'requests', id);\n      await updateDoc(requestRef, {\n        status: 'approved'\n      });\n      setRequests(prevRequests => prevRequests.filter(request => request.id !== id));\n    } catch (error) {\n      console.error('Error approving request:', error);\n    }\n  };\n  const handleReject = async id => {\n    try {\n      const requestRef = doc(db, 'requests', id);\n      await updateDoc(requestRef, {\n        status: 'rejected'\n      });\n      setRequests(prevRequests => prevRequests.filter(request => request.id !== id));\n    } catch (error) {\n      console.error('Error rejecting request:', error);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 16\n      }\n    }, \"Loading...\");\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"requests-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Sidebar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"requests-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, \"Pending Blood Requests\"), requests.length === 0 ? /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }\n  }, \"No pending requests.\") : /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"requests-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }\n  }, requests.map(request => /*#__PURE__*/React.createElement(\"li\", {\n    key: request.id,\n    className: \"request-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"request-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 36\n    }\n  }, \"User:\"), \" \", request.userName), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 36\n    }\n  }, \"Blood Type:\"), \" \", request.bloodType), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 36\n    }\n  }, \"Quantity:\"), \" \", request.quantity, \" units\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 36\n    }\n  }, \"Date:\"), \" \", new Date(request.date).toLocaleDateString())), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"request-actions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleApprove(request.id),\n    className: \"approve-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 33\n    }\n  }, \"Approve\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleReject(request.id),\n    className: \"reject-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 33\n    }\n  }, \"Reject\")))))));\n};\nexport default Requests;","map":{"version":3,"names":["React","useState","useEffect","db","collection","query","where","getDocs","updateDoc","doc","Sidebar","Requests","requests","setRequests","loading","setLoading","fetchRequests","q","querySnapshot","requestList","docs","map","id","data","error","console","handleApprove","requestRef","status","prevRequests","filter","request","handleReject","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","length","key","userName","bloodType","quantity","Date","date","toLocaleDateString","onClick"],"sources":["C:/Users/User/blood-bank-management/src/components/pages/AdminRequest.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { db, collection, query, where, getDocs, updateDoc, doc } from '../../firebase';\r\nimport './AdminRequest.css';\r\nimport Sidebar from '../Sidebar';\r\n\r\nconst Requests = () => {\r\n    const [requests, setRequests] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const fetchRequests = async () => {\r\n            try {\r\n                const q = query(collection(db, 'requests'), where('status', '==', 'pending'));\r\n                const querySnapshot = await getDocs(q);\r\n                const requestList = querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n                setRequests(requestList);\r\n                setLoading(false);\r\n            } catch (error) {\r\n                console.error('Error fetching requests:', error);\r\n            }\r\n        };\r\n\r\n        fetchRequests();\r\n    }, []);\r\n\r\n    const handleApprove = async (id) => {\r\n        try {\r\n            const requestRef = doc(db, 'requests', id);\r\n            await updateDoc(requestRef, { status: 'approved' });\r\n            setRequests(prevRequests => prevRequests.filter(request => request.id !== id));\r\n        } catch (error) {\r\n            console.error('Error approving request:', error);\r\n        }\r\n    };\r\n\r\n    const handleReject = async (id) => {\r\n        try {\r\n            const requestRef = doc(db, 'requests', id);\r\n            await updateDoc(requestRef, { status: 'rejected' });\r\n            setRequests(prevRequests => prevRequests.filter(request => request.id !== id));\r\n        } catch (error) {\r\n            console.error('Error rejecting request:', error);\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return <p>Loading...</p>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"requests-page\">\r\n        <Sidebar />\r\n        <div className=\"requests-container\">\r\n            <h1>Pending Blood Requests</h1>\r\n            {requests.length === 0 ? (\r\n                <p>No pending requests.</p>\r\n            ) : (\r\n                <ul className=\"requests-list\">\r\n                    {requests.map(request => (\r\n                        <li key={request.id} className=\"request-item\">\r\n                            <div className=\"request-details\">\r\n                                <p><strong>User:</strong> {request.userName}</p>\r\n                                <p><strong>Blood Type:</strong> {request.bloodType}</p>\r\n                                <p><strong>Quantity:</strong> {request.quantity} units</p>\r\n                                <p><strong>Date:</strong> {new Date(request.date).toLocaleDateString()}</p>\r\n                            </div>\r\n                            <div className=\"request-actions\">\r\n                                <button onClick={() => handleApprove(request.id)} className=\"approve-button\">Approve</button>\r\n                                <button onClick={() => handleReject(request.id)} className=\"reject-button\">Reject</button>\r\n                            </div>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            )}\r\n        </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Requests;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}