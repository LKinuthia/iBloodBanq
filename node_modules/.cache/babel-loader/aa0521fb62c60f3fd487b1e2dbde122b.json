{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\blood-bank-management\\\\src\\\\components\\\\FindingBlood.js\";\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport axios from 'axios';\nimport { GoogleMap, LoadScript, Marker, InfoWindow } from '@react-google-maps/api';\nconst FindingBlood = () => {\n  const [data, setData] = useState([]);\n  const [groupedData, setGroupedData] = useState({});\n  const [hoveredMarker, setHoveredMarker] = useState(null);\n  const containerStyle = {\n    width: '100%',\n    height: '400px'\n  };\n  const center = {\n    lat: -1.2921,\n    lng: 36.8219\n  };\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await axios.get('http://127.0.0.1:5000/data');\n        console.log('Data type:', typeof response.data);\n        console.log('Response:', response.data);\n        if (Array.isArray(response.data)) {\n          setData(response.data);\n        } else {\n          console.error('Data received is not an array');\n        }\n      } catch (error) {\n        console.error('Error fetching data:', error);\n      }\n    };\n    fetchData();\n  }, []);\n  const memoizedGroupedData = useMemo(() => {\n    const grouped = data.reduce((acc, item) => {\n      const location = item.Location;\n      const bloodType = item['Blood Type'];\n      const supply = item.Supplied;\n      if (!acc[location]) {\n        acc[location] = {};\n      }\n      if (!acc[location][bloodType]) {\n        acc[location][bloodType] = 0;\n      }\n      acc[location][bloodType] += supply;\n      return acc;\n    }, {});\n    console.log('Grouped Data:', grouped);\n    return grouped;\n  }, [data]);\n  useEffect(() => {\n    setGroupedData(memoizedGroupedData);\n  }, [memoizedGroupedData]);\n  const getCoordinates = location => {\n    const locations = {\n      'Nairobi': {\n        lat: -1.286389,\n        lng: 36.817223\n      },\n      'Mombasa': {\n        lat: -4.043477,\n        lng: 39.668206\n      },\n      'Kisumu': {\n        lat: -0.091702,\n        lng: 34.768096\n      },\n      'Nakuru': {\n        lat: -0.28333,\n        lng: 36.06666\n      },\n      'Eldoret': {\n        lat: 0.51667,\n        lng: 35.28333\n      }\n    };\n    return locations[location] || center;\n  };\n  const handleMouseOver = useCallback(location => {\n    setHoveredMarker(location);\n  }, []);\n  const handleMouseOut = useCallback(() => {\n    setHoveredMarker(null);\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }\n  }, \"Blood Stock Availability\"), /*#__PURE__*/React.createElement(LoadScript, {\n    googleMapsApiKey: \"AIzaSyD07cMGrAdZzFU1FexlCWLCWlPX-J3g6p4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(GoogleMap, {\n    mapContainerStyle: containerStyle,\n    center: center,\n    zoom: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, Object.keys(groupedData).map((location, index) => /*#__PURE__*/React.createElement(Marker, {\n    key: index,\n    position: getCoordinates(location),\n    onMouseOver: () => handleMouseOver(location),\n    onMouseOut: handleMouseOut,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, hoveredMarker === location && /*#__PURE__*/React.createElement(InfoWindow, {\n    position: getCoordinates(location),\n    onCloseClick: () => setHoveredMarker(null),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 21\n    }\n  }, location), Object.keys(groupedData[location]).map((bloodType, idx) => /*#__PURE__*/React.createElement(\"p\", {\n    key: idx,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 23\n    }\n  }, \"Blood Type: \", bloodType, \" : \", groupedData[location][bloodType])))))))));\n};\nexport default FindingBlood;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useMemo","axios","GoogleMap","LoadScript","Marker","InfoWindow","FindingBlood","data","setData","groupedData","setGroupedData","hoveredMarker","setHoveredMarker","containerStyle","width","height","center","lat","lng","fetchData","response","get","console","log","Array","isArray","error","memoizedGroupedData","grouped","reduce","acc","item","location","Location","bloodType","supply","Supplied","getCoordinates","locations","handleMouseOver","handleMouseOut","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","googleMapsApiKey","mapContainerStyle","zoom","Object","keys","map","index","key","position","onMouseOver","onMouseOut","onCloseClick","idx"],"sources":["C:/Users/User/blood-bank-management/src/components/FindingBlood.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport axios from 'axios';\r\nimport { GoogleMap, LoadScript, Marker, InfoWindow } from '@react-google-maps/api';\r\n\r\nconst FindingBlood = () => {\r\n  const [data, setData] = useState([]);\r\n  const [groupedData, setGroupedData] = useState({});\r\n  const [hoveredMarker, setHoveredMarker] = useState(null);\r\n\r\n  const containerStyle = {\r\n    width: '100%',\r\n    height: '400px',\r\n  };\r\n\r\n  const center = {\r\n    lat: -1.2921,\r\n    lng: 36.8219,\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const response = await axios.get('http://127.0.0.1:5000/data');\r\n        console.log('Data type:', typeof response.data);\r\n        console.log('Response:', response.data);\r\n\r\n        if (Array.isArray(response.data)) {\r\n          setData(response.data);\r\n        } else {\r\n          console.error('Data received is not an array');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching data:', error);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  const memoizedGroupedData = useMemo(() => {\r\n    const grouped = data.reduce((acc, item) => {\r\n      const location = item.Location;\r\n      const bloodType = item['Blood Type'];\r\n      const supply = item.Supplied;\r\n\r\n      if (!acc[location]) {\r\n        acc[location] = {};\r\n      }\r\n      if (!acc[location][bloodType]) {\r\n        acc[location][bloodType] = 0;\r\n      }\r\n      acc[location][bloodType] += supply;\r\n\r\n      return acc;\r\n    }, {});\r\n\r\n    console.log('Grouped Data:', grouped);\r\n    return grouped;\r\n  }, [data]);\r\n\r\n  useEffect(() => {\r\n    setGroupedData(memoizedGroupedData);\r\n  }, [memoizedGroupedData]);\r\n\r\n  const getCoordinates = (location) => {\r\n    const locations = {\r\n      'Nairobi': { lat: -1.286389, lng: 36.817223 },\r\n      'Mombasa': { lat: -4.043477, lng: 39.668206 },\r\n      'Kisumu': { lat: -0.091702, lng: 34.768096 },\r\n      'Nakuru': { lat: -0.28333, lng: 36.06666 },\r\n      'Eldoret': { lat: 0.51667, lng: 35.28333 },\r\n    };\r\n    return locations[location] || center;\r\n  };\r\n\r\n  const handleMouseOver = useCallback((location) => {\r\n    setHoveredMarker(location);\r\n  }, []);\r\n\r\n  const handleMouseOut = useCallback(() => {\r\n    setHoveredMarker(null);\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <h1>Blood Stock Availability</h1>\r\n      <LoadScript googleMapsApiKey=\"AIzaSyD07cMGrAdZzFU1FexlCWLCWlPX-J3g6p4\">\r\n        <GoogleMap mapContainerStyle={containerStyle} center={center} zoom={6}>\r\n          {Object.keys(groupedData).map((location, index) => (\r\n            <Marker\r\n              key={index}\r\n              position={getCoordinates(location)}\r\n              onMouseOver={() => handleMouseOver(location)}\r\n              onMouseOut={handleMouseOut}\r\n            >\r\n              {hoveredMarker === location && (\r\n                <InfoWindow\r\n                  position={getCoordinates(location)}\r\n                  onCloseClick={() => setHoveredMarker(null)}\r\n                >\r\n                  <div>\r\n                    <h3>{location}</h3>\r\n                    {Object.keys(groupedData[location]).map((bloodType, idx) => (\r\n                      <p key={idx}>Blood Type: {bloodType} : {groupedData[location][bloodType]}</p>\r\n                    ))}\r\n                  </div>\r\n                </InfoWindow>\r\n              )}\r\n            </Marker>\r\n          ))}\r\n        </GoogleMap>\r\n      </LoadScript>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FindingBlood;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}