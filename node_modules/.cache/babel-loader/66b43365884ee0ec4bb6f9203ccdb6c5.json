{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\blood-bank-management\\\\src\\\\components\\\\pages\\\\AdminRequest.js\";\nimport React, { useState, useEffect } from 'react';\nimport { db, collection, query, where, getDocs, updateDoc, doc } from '../../firebase';\nimport './AdminRequest.css';\nimport Sidebar from '../Sidebar';\nconst Requests = ({\n  handleLogout\n}) => {\n  const [requests, setRequests] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\n  const toggleSidebar = () => {\n    setIsSidebarOpen(!isSidebarOpen);\n  };\n  useEffect(() => {\n    const fetchRequests = async () => {\n      try {\n        const q = query(collection(db, 'requests'), where('status', '==', 'pending'));\n        const querySnapshot = await getDocs(q);\n        const requestList = querySnapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        }));\n        setRequests(requestList);\n        setLoading(false);\n      } catch (error) {\n        console.error('Error fetching requests:', error);\n      }\n    };\n    fetchRequests();\n  }, []);\n  const handleApprove = async id => {\n    try {\n      const requestRef = doc(db, 'requests', id);\n      await updateDoc(requestRef, {\n        status: 'approved'\n      });\n      setRequests(prevRequests => prevRequests.filter(request => request.id !== id));\n    } catch (error) {\n      console.error('Error approving request:', error);\n    }\n  };\n  const handleReject = async id => {\n    try {\n      const requestRef = doc(db, 'requests', id);\n      await updateDoc(requestRef, {\n        status: 'rejected'\n      });\n      setRequests(prevRequests => prevRequests.filter(request => request.id !== id));\n    } catch (error) {\n      console.error('Error rejecting request:', error);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 16\n      }\n    }, \"Loading...\");\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"requests-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Sidebar, {\n    isOpen: isSidebarOpen,\n    toggleSidebar: toggleSidebar,\n    handleLogout: handleLogout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: `requests-container ${isSidebarOpen ? 'shifted' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"sidebar-toggles\",\n    onClick: toggleSidebar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }, isSidebarOpen ? 'Close' : 'Open', \"  \\u2630\"), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }, \"Pending Blood Requests\"), requests.length === 0 ? /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 21\n    }\n  }, \"No pending requests.\") : /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"requests-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 21\n    }\n  }, requests.map(request => /*#__PURE__*/React.createElement(\"li\", {\n    key: request.id,\n    className: \"request-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"request-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 40\n    }\n  }, \"User:\"), \" \", request.userName), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 40\n    }\n  }, \"Blood Type:\"), \" \", request.bloodType), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 40\n    }\n  }, \"Quantity:\"), \" \", request.quantity, \" units\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 40\n    }\n  }, \"Date:\"), \" \", new Date(request.date).toLocaleDateString())), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"request-actions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleApprove(request.id),\n    className: \"approve-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 37\n    }\n  }, \"Approve\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleReject(request.id),\n    className: \"reject-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 37\n    }\n  }, \"Reject\")))))));\n};\nexport default Requests;","map":{"version":3,"names":["React","useState","useEffect","db","collection","query","where","getDocs","updateDoc","doc","Sidebar","Requests","handleLogout","requests","setRequests","loading","setLoading","isSidebarOpen","setIsSidebarOpen","toggleSidebar","fetchRequests","q","querySnapshot","requestList","docs","map","id","data","error","console","handleApprove","requestRef","status","prevRequests","filter","request","handleReject","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","isOpen","onClick","length","key","userName","bloodType","quantity","Date","date","toLocaleDateString"],"sources":["C:/Users/User/blood-bank-management/src/components/pages/AdminRequest.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { db, collection, query, where, getDocs, updateDoc, doc } from '../../firebase';\r\nimport './AdminRequest.css';\r\nimport Sidebar from '../Sidebar';\r\n\r\nconst Requests = ({ handleLogout }) => {\r\n    const [requests, setRequests] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [isSidebarOpen, setIsSidebarOpen] = useState(false);\r\n\r\n    const toggleSidebar = () => {\r\n        setIsSidebarOpen(!isSidebarOpen);\r\n    };\r\n\r\n    useEffect(() => {\r\n        const fetchRequests = async () => {\r\n            try {\r\n                const q = query(collection(db, 'requests'), where('status', '==', 'pending'));\r\n                const querySnapshot = await getDocs(q);\r\n                const requestList = querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n                setRequests(requestList);\r\n                setLoading(false);\r\n            } catch (error) {\r\n                console.error('Error fetching requests:', error);\r\n            }\r\n        };\r\n\r\n        fetchRequests();\r\n    }, []);\r\n\r\n    const handleApprove = async (id) => {\r\n        try {\r\n            const requestRef = doc(db, 'requests', id);\r\n            await updateDoc(requestRef, { status: 'approved' });\r\n            setRequests(prevRequests => prevRequests.filter(request => request.id !== id));\r\n        } catch (error) {\r\n            console.error('Error approving request:', error);\r\n        }\r\n    };\r\n\r\n    const handleReject = async (id) => {\r\n        try {\r\n            const requestRef = doc(db, 'requests', id);\r\n            await updateDoc(requestRef, { status: 'rejected' });\r\n            setRequests(prevRequests => prevRequests.filter(request => request.id !== id));\r\n        } catch (error) {\r\n            console.error('Error rejecting request:', error);\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return <p>Loading...</p>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"requests-page\">\r\n            <Sidebar isOpen={isSidebarOpen} toggleSidebar={toggleSidebar} handleLogout={handleLogout} />\r\n            <div className={`requests-container ${isSidebarOpen ? 'shifted' : ''}`}>\r\n                <button className=\"sidebar-toggles\" onClick={toggleSidebar}>\r\n                    {isSidebarOpen ? 'Close' : 'Open'}  â˜°\r\n                </button>\r\n                <h1>Pending Blood Requests</h1>\r\n                {requests.length === 0 ? (\r\n                    <p>No pending requests.</p>\r\n                ) : (\r\n                    <ul className=\"requests-list\">\r\n                        {requests.map(request => (\r\n                            <li key={request.id} className=\"request-item\">\r\n                                <div className=\"request-details\">\r\n                                    <p><strong>User:</strong> {request.userName}</p>\r\n                                    <p><strong>Blood Type:</strong> {request.bloodType}</p>\r\n                                    <p><strong>Quantity:</strong> {request.quantity} units</p>\r\n                                    <p><strong>Date:</strong> {new Date(request.date).toLocaleDateString()}</p>\r\n                                </div>\r\n                                <div className=\"request-actions\">\r\n                                    <button onClick={() => handleApprove(request.id)} className=\"approve-button\">Approve</button>\r\n                                    <button onClick={() => handleReject(request.id)} className=\"reject-button\">Reject</button>\r\n                                </div>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Requests;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}